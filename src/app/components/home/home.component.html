<div class="root">
  <ng-content></ng-content>
  <ng-container *ngIf="(confAPP$|async) as confAPP">
    <ion-item lines="none" *ngIf="confAPP.welcome as welcome">
      <ion-label [innerHTML]="sanitizer.bypassSecurityTrustHtml(welcome | wmtrans)"></ion-label>
    </ion-item>
  </ng-container>

  <webmapp-search #searchCmp [initSearch]="''" (words)="setSearch($event)"> </webmapp-search>
  <wm-status-filter
    *ngIf="showResult$|async"
    [layer]="currentLayer$|async"
    [trackFilters]="(trackFilters$|async)"
    [poiFilters]=" (poiFilters$|async)"
    (resetFiltersEVT)="goToHome()"
    (removeLayerEVT)="removeLayer($event)"
    (removeTrackFilterEVT)="removeFilter($event)"
    (removePoiFilterEVT)="removePoiFilter($event)"
  ></wm-status-filter>
  <wm-home-layer *ngIf="currentLayer$|async as currentLayer" [layer]="currentLayer"></wm-home-layer>
  <wm-home-result
    *ngIf="showResult$|async;else home"
    [tracks]="(tracks$|async)"
    [loadingTracks]="trackLoading$|async"
    [pois]="(pois$|async)"
    (trackEVT)="setTrack($event)"
    (poiEVT)="setPoi($event)"
  ></wm-home-result>
  <ng-template #home>
    <wm-home-page
      [conf]="confHOME$|async"
      (horizontalScrollBoxEVT)="setFilter($event)"
      (poiTypeFilterBoxEVT)="toggleFilter($event[0],$event[1])"
      (slugBoxEVT)="openSlug($event[0],$event[1])"
      (externalUrlBoxEVT)="openExternalUrl($event)"
      (tracksBoxEVT)="setTrack($event)"
      (layerBoxEVT)="setLayer($event[0],$event[1])"
    ></wm-home-page>
  </ng-template>
</div>
