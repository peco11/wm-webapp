<div class="root">
  <webmapp-search
    *ngIf="showSearch &&(currentLayer$|async) === null"
    [initSearch]="title"
    (words)="isTyping$.next($event)"
  ></webmapp-search>
  <ng-container *ngIf="(currentLayer$|async) as currentLayer">
    <ng-container *ngIf="(isTyping$|async)===false && currentLayer!=null">
      <div class="reset-layer" (click)="setLayer(null)">
        <ion-icon name="caret-back-outline"></ion-icon>
        <div>{{currentLayer.title}}</div>
      </div>
    </ng-container>
  </ng-container>

  <ion-content style="--offset-top:56px; --offset-bottom:56px;" class="wm-home-cardcontainer">
    <ng-container *ngIf="(isTyping$|async)||(layerCards$|async)!=null; else layers">
      <webmapp-search-box
        *ngFor="let card of cards$|async"
        [data]="card"
        (clickEVT)="searchCard(card.id)"
      >
      </webmapp-search-box>
    </ng-container>

    <ng-template #layers>
      <ng-container *ngFor="let home of confHOME$|async">
        <div *ngIf="home.box_type === 'title'" class="webmapp-home-title">
          {{home.title}}
        </div>
        <webmapp-slug-box *ngIf="home.box_type === 'slug'" [data]="home"
        (clickEVT)="openSlug(home.slug)"> 
      </webmapp-slug-box>
        <webmapp-layer-box
          *ngIf="home.box_type === 'layer'"
          [data]="home.layer"
          (clickEVT)="setLayer(home.layer)"
        >
        </webmapp-layer-box>
      </ng-container>
    </ng-template>
  </ion-content>
</div>
