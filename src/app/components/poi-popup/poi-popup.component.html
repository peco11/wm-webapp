<ng-container *ngIf="poiProperties!= null">
  <webmapp-image-modal
    *ngIf="toggleImage$|async as image"
    (closeEVT)="toggleImage()"
    [image]="image"
  ></webmapp-image-modal>
  <div class="slides-container">
    <ion-slides #gallery class="gallery" [options]="slideOptions">
      <ion-slide
        pager="true"
        (click)="toggleImage(poiProperties.feature_image !=null? poiProperties.feature_image.url:defaultPhotoPath)"
      >
        <img
          class="webmapp-poi-popup-img"
          [src]="poiProperties.feature_image !=null? poiProperties.feature_image.url:defaultPhotoPath"
        />
      </ion-slide>
      <ion-slide
        *ngFor="let image of poiProperties.image_gallery"
        pager="true"
        (click)="toggleImage(image.url)"
      >
        <img [src]="image.url" class="webmapp-poi-popup-img" />
      </ion-slide>
    </ion-slides>
    <ng-container
      *ngIf="poiProperties.image_gallery!= null && poiProperties.image_gallery.length > 0"
    >
      <button type="submit" ion-button class="webmapp-poi-popup-left left" (click)="prev()">
        <ion-icon name="caret-back-outline"></ion-icon>
      </button>
      <button type="submit" ion-button class="webmapp-poi-popup-right right" (click)="next()">
        <ion-icon name="caret-forward-outline"></ion-icon>
      </button>
    </ng-container>
  </div>

  <span class="webmapp-poi-popup-header">
    <button class="webmapp-poi-popup-left" *ngIf="poiProperties.related" (click)="prevEVT.emit()">
      <i class="icn-outline-arrow-left"></i>
    </button>
    <p class="webmapp-poi-popup-title">{{poiProperties.name|WebmappTranslate}}</p>
    <button class="webmapp-poi-popup-right" (click)="nextEVT.emit()" *ngIf="poiProperties.related">
      <i class="icn-outline-arrow-right"></i>
    </button>
  </span>
  <div class="webmapp-poi-popup-btns">
    <div class="webmapp-poi-popup-btn" *ngIf="poiProperties.address">
      <i class="wm-icn icn-fill-pin"></i>
      <a href="https://www.google.com/maps/place/{{poiProperties.address_link}}" target="_blank">
        {{poiProperties.address}}
      </a>
    </div>
    <div class="webmapp-poi-popup-btn" *ngIf="poiProperties.contact_phone" target="_blank">
      <i class="wm-icn icn-fill-phone"></i>
      <p>
        <a href="tel:{{poiProperties.contact_email}}">
          {{poiProperties.contact_phone}}
        </a>
      </p>
    </div>
    <div class="webmapp-poi-popup-btn" *ngIf="poiProperties.contact_email" target="_blank">
      <i class="wm-icn icn-fill-mail"></i>
      <a [href]="poiProperties.contact_email">
        {{poiProperties.contact_email}}
      </a>
    </div>
    <div class="webmapp-poi-popup-btn" *ngIf="poiProperties.related_url != null">
      <i class="wm-icn icn-fill-globe"></i>
      <webmapp-related-urls [relatedUrls]="poiProperties.related_url"></webmapp-related-urls>
    </div>
  </div>

  <div
    class="webmapp-poi-popup-text"
    [innerHTML]="poiProperties.description|WebmappTranslate"
  ></div>

  <ng-container *ngIf="poiProperties?.audio">
    <div class="webmapp-title">Descrizione Audio</div>
    <webmapp-track-audio [audio]="poiProperties?.audio"></webmapp-track-audio>
  </ng-container>

  <button class="webmapp-poi-popup-close" (click)="closeEVT.emit()">
    <i class="icn-outline-close"></i>
  </button>
</ng-container>
